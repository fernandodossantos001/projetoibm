package br.com.deschateie.bo;

import br.com.deschateie.beans.Psicologo;
import br.com.deschateie.dao.PsicologoDAO;

public class PsicologoBO {

	public static Psicologo pesquisarPsicologo(int codPsicologo)throws Exception {
		
		if(codPsicologo<1 || codPsicologo > 99999) {
			return new Psicologo();
		}
		
		PsicologoDAO dao = new PsicologoDAO();
		Psicologo p = dao.consultarPsicologo(codPsicologo);
		 if(p.getCodPsicologo()<1) {
			 return new Psicologo();
		 }
		
		dao.fechar();
		return new Psicologo(p);
		
		
		
		
		
	}

	
	
	public static String excluirPsicologo(int codPsicologo)throws Exception {
	
		if (codPsicologo<0) {
			return "codigo invalido";
		}
		if(codPsicologo>99999) {
			return "código muito grande";
		}
		
		
		Psicologo p = pesquisarPsicologo(codPsicologo);
		
		if(p.getCodPsicologo()<1) {
			return "Psicologo nãpo encontrado";
		}
		
		PsicologoDAO dao = new PsicologoDAO();
		dao.excluirPsicologo(codPsicologo);
		return null;
	}



	public static String  NovoPsicologo(Psicologo p) throws Exception{
		
		if(p.getCodUsuario()<0) {
			return "código inválido";
		}
		
		if(p.getCodUsuario()>99999) {
			return "codigo muito grande";
		}
		 if(p.getFormacao().length()<0) {
			 return "formaco nao pode estar vazia";
		 }
		 
		 if (p.getFormacao().length()>20) {
			return"formacao muito grande";		}
		 
		 if (p.getBiografia().length()>120) {
			return"biografia muito grande";
		}
		 
		 if (p.getTelefone()<0) {
			return "telefone invalido";
		}
		 
		 if (p.getTelefone()>99999999999l) {
			return "telefone muito grande";
		}
		 
		 if (p.getFoto().length()>120) {
			return "url da foto muito grande";
		}
		 
		 if(p.getFoto().length()<1) {
			 return "url da foto não pode estar vazia";
		 }
		 
		 if (p.getValorConsulta()>8) {
			return "valor muito grande";
		}
		if(p.getCrp()<0) {
			return "CRP invalido";
		}
		
		if(p.getCrp()>9999999) {
			return"CRP muito grande";
		}
		
		
		PsicologoDAO dao = new PsicologoDAO();
		Psicologo ps = dao.consultarPsicologo(p.getCodUsuario());
		 if(ps.getCrp()== p.getCrp()) {
			 return "CRP Já existe";
		 }
		return null;
	}


	
}
