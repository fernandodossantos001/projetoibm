package br.com.deschateie.bo;

import br.com.deschateie.beans.Paciente;
import br.com.deschateie.dao.PacienteDAO;

public class PacienteBO {
	
	public static String consutlarPaciente(int codPaciente)throws Exception{
		
		if(codPaciente <0) {
			return "código inválido";
		}
		if(codPaciente> 99999) {
			return "código muito grande";
		}
		
		PacienteDAO dao = new PacienteDAO();
		
		Paciente p = dao.consultarPaciente(codPaciente);
		dao.fechar();
		return p.getAll();
		
		
		
	}


	public static String novoPaciente(Paciente p)throws Exception{
		
		
		
		if(p.getCodUsuario()!=p.getCodPaciente()) {
			return "os códigos do usuario e do paciente precisam ser iguais";
		}
		
		if(p.getCodPaciente()<1) {
			return "código inválido";
		}
		
		if (p.getCodPaciente()>99999) {
			return "código muito grande";
		}
		
		if(p.getCep()>99999999) {
			return "cep muito grande";
		}
		
		if(p.getCep()<1) {
			return "cep inválido";
		}
			
		if(p.getHistorico().length()>2000) {
			return "histórico muito grande";
		}
		
		if(p.getConsultasReazlizadas()>999) {
			return "consulta muito grande";
		}
		
		if(p.getConsultasReazlizadas()<1) {
			return "a quantidade de consultas não pode estar vazia";
		}
		
		String status = UsuarioBO.novoUsuario(p);
		
		if(!status.equals("Usuário cadastrado com Sucesso")) {
			
			return status;
		}
		
		
		PacienteDAO dao = new PacienteDAO().gravarPaciente(p);
		
		return "cadastrado com sucesso";
	}
}
